{% extends 'base2.html' %}
{% load custom_filters %}
{% load humanize %}
{% load static %}

{% block content %}
<!-- Main Content -->
<main class="main-content has-sidebar">
  <div class="main-inner">
    <div class="mb-6 flex flex-wrap items-center justify-between gap-4 lg:mb-8">
      <div>
        <h4 class="h4 mb-1" id="greeting"></h4>
      </div>

    </div>
    <!-- TradingView Widget BEGIN -->
    <div class="tradingview-widget-container mb-4">
      <div class="tradingview-widget-container__widget"></div>
      <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js"
        async>
        {
          "symbols": [{
              "proName": "FOREXCOM:SPXUSD",
              "title": "S&P 500 Index"
            },
            {
              "proName": "FOREXCOM:NSXUSD",
              "title": "US 100 Cash CFD"
            },
            {
              "proName": "FX_IDC:EURUSD",
              "title": "EUR to USD"
            },
            {
              "proName": "BITSTAMP:BTCUSD",
              "title": "Bitcoin"
            },
            {
              "proName": "BITSTAMP:ETHUSD",
              "title": "Ethereum"
            }
          ],
          "showSymbolLogo": true,
          "isTransparent": true,
          "displayMode": "adaptive",
          "colorTheme": "dark",
          "locale": "en"
        }
      </script>
    </div>
    <!-- TradingView Widget END -->
    <div class="grid grid-cols-12 gap-4 xxl:gap-6">

      <div class="col-span-12 flex flex-col gap-4 md:col-span-7 lg:col-span-8 xxl:gap-6">
        <!-- Statistics -->
        <div
          class="xxl:box grid grid-cols-6 p-0 max-xxl:gap-4 xxl:divide-x-2 xxl:divide-dashed xxl:p-4 xxl:dark:divide-n500 4xl:p-8 xxl:ltr:divide-n30 xxl:rtl:divide-x-reverse">
          <div
            class="max-xxl:box col-span-6 flex items-center justify-between gap-3 overflow-x-hidden sm:col-span-3 md:col-span-6 lg:col-span-3 xxl:col-span-2 xxl:px-4 xxl:ltr:first:pl-0 xxl:last:ltr:pr-0">
            <div>
              <p class="mb-4 font-medium">Main Balance</p>
              <div class="flex items-center gap-2">
                <h2 class="h4">{{user.currency}}{{ user.available_balance|intcomma }}</h2>
                {% comment %} <span class="flex items-center gap-1 text-sm text-primary"><i
                    class="las la-arrow-up text-base"></i> 50.8%</span> {% endcomment %}
              </div>
            </div>
            <div class="max-w-[200px]">
              <div class="mr-2">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="50" height="50"
                  fill=" rgb(32 183 87)">
                  <path
                    d="M320 96L192 96 144.6 24.9C137.5 14.2 145.1 0 157.9 0L354.1 0c12.8 0 20.4 14.2 13.3 24.9L320 96zM192 128l128 0c3.8 2.5 8.1 5.3 13 8.4C389.7 172.7 512 250.9 512 416c0 53-43 96-96 96L96 512c-53 0-96-43-96-96C0 250.9 122.3 172.7 179 136.4c0 0 0 0 0 0s0 0 0 0c4.8-3.1 9.2-5.9 13-8.4zm84 88c0-11-9-20-20-20s-20 9-20 20l0 14c-7.6 1.7-15.2 4.4-22.2 8.5c-13.9 8.3-25.9 22.8-25.8 43.9c.1 20.3 12 33.1 24.7 40.7c11 6.6 24.7 10.8 35.6 14l1.7 .5c12.6 3.8 21.8 6.8 28 10.7c5.1 3.2 5.8 5.4 5.9 8.2c.1 5-1.8 8-5.9 10.5c-5 3.1-12.9 5-21.4 4.7c-11.1-.4-21.5-3.9-35.1-8.5c-2.3-.8-4.7-1.6-7.2-2.4c-10.5-3.5-21.8 2.2-25.3 12.6s2.2 21.8 12.6 25.3c1.9 .6 4 1.3 6.1 2.1c0 0 0 0 0 0s0 0 0 0c8.3 2.9 17.9 6.2 28.2 8.4l0 14.6c0 11 9 20 20 20s20-9 20-20l0-13.8c8-1.7 16-4.5 23.2-9c14.3-8.9 25.1-24.1 24.8-45c-.3-20.3-11.7-33.4-24.6-41.6c-11.5-7.2-25.9-11.6-37.1-15c0 0 0 0 0 0l-.7-.2c-12.8-3.9-21.9-6.7-28.3-10.5c-5.2-3.1-5.3-4.9-5.3-6.7c0-3.7 1.4-6.5 6.2-9.3c5.4-3.2 13.6-5.1 21.5-5c9.6 .1 20.2 2.2 31.2 5.2c10.7 2.8 21.6-3.5 24.5-14.2s-3.5-21.6-14.2-24.5c-6.5-1.7-13.7-3.4-21.1-4.7l0-13.9z" />
                </svg>
              </div>
            </div>
          </div>
          <div
            class="max-xxl:box col-span-6 flex items-center justify-between gap-3 overflow-x-hidden sm:col-span-3 md:col-span-6 lg:col-span-3 xxl:col-span-2 xxl:px-4 xxl:ltr:first:pl-0 xxl:last:ltr:pr-0">
            <div>
              <p class="mb-4 font-medium">Last Received</p>
              <div class="flex items-center gap-2">
                <h2 class="h4">{{user.currency}}{{ user.last_received|intcomma }}</h2>

              </div>
            </div>
            <div class="mr-2">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="62" height="62"
                fill=" rgb(32 183 87)">
                <path
                  d="M312 24l0 10.5c6.4 1.2 12.6 2.7 18.2 4.2c12.8 3.4 20.4 16.6 17 29.4s-16.6 20.4-29.4 17c-10.9-2.9-21.1-4.9-30.2-5c-7.3-.1-14.7 1.7-19.4 4.4c-2.1 1.3-3.1 2.4-3.5 3c-.3 .5-.7 1.2-.7 2.8c0 .3 0 .5 0 .6c.2 .2 .9 1.2 3.3 2.6c5.8 3.5 14.4 6.2 27.4 10.1l.9 .3s0 0 0 0c11.1 3.3 25.9 7.8 37.9 15.3c13.7 8.6 26.1 22.9 26.4 44.9c.3 22.5-11.4 38.9-26.7 48.5c-6.7 4.1-13.9 7-21.3 8.8l0 10.6c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-11.4c-9.5-2.3-18.2-5.3-25.6-7.8c-2.1-.7-4.1-1.4-6-2c-12.6-4.2-19.4-17.8-15.2-30.4s17.8-19.4 30.4-15.2c2.6 .9 5 1.7 7.3 2.5c13.6 4.6 23.4 7.9 33.9 8.3c8 .3 15.1-1.6 19.2-4.1c1.9-1.2 2.8-2.2 3.2-2.9c.4-.6 .9-1.8 .8-4.1l0-.2c0-1 0-2.1-4-4.6c-5.7-3.6-14.3-6.4-27.1-10.3l-1.9-.6c-10.8-3.2-25-7.5-36.4-14.4c-13.5-8.1-26.5-22-26.6-44.1c-.1-22.9 12.9-38.6 27.7-47.4c6.4-3.8 13.3-6.4 20.2-8.2L264 24c0-13.3 10.7-24 24-24s24 10.7 24 24zM568.2 336.3c13.1 17.8 9.3 42.8-8.5 55.9L433.1 485.5c-23.4 17.2-51.6 26.5-80.7 26.5L192 512 32 512c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l36.8 0 44.9-36c22.7-18.2 50.9-28 80-28l78.3 0 16 0 64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0-16 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l120.6 0 119.7-88.2c17.8-13.1 42.8-9.3 55.9 8.5zM193.6 384c0 0 0 0 0 0l-.9 0c.3 0 .6 0 .9 0z" />
              </svg>

            </div>
          </div>
          <div
            class="max-xxl:box col-span-6 flex items-center justify-between gap-3 overflow-x-hidden sm:col-span-3 md:col-span-6 lg:col-span-3 xxl:col-span-2 xxl:px-4 xxl:ltr:first:pl-0 xxl:last:ltr:pr-0">
            <div>
              <p class="mb-4 font-medium">Ledger Balance</p>
              <div class="flex items-center gap-2">
                <h2 class="h4">{{user.currency}}{{ user.ledger_balance|intcomma }}</h2>
                {% comment %} <span class="flex items-center gap-1 text-sm text-primary"><i
                    class="las la-arrow-up text-base"></i> 50.8%</span> {% endcomment %}
              </div>
            </div>
            <div class="mr-4">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" width="62" height="62"
              fill=" rgb(32 183 87)">
                <path
                  d="M535 41c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l64 64c4.5 4.5 7 10.6 7 17s-2.5 12.5-7 17l-64 64c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l23-23L384 112c-13.3 0-24-10.7-24-24s10.7-24 24-24l174.1 0L535 41zM105 377l-23 23L256 400c13.3 0 24 10.7 24 24s-10.7 24-24 24L81.9 448l23 23c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0L7 441c-4.5-4.5-7-10.6-7-17s2.5-12.5 7-17l64-64c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM96 64l241.9 0c-3.7 7.2-5.9 15.3-5.9 24c0 28.7 23.3 52 52 52l117.4 0c-4 17 .6 35.5 13.8 48.8c20.3 20.3 53.2 20.3 73.5 0L608 169.5 608 384c0 35.3-28.7 64-64 64l-241.9 0c3.7-7.2 5.9-15.3 5.9-24c0-28.7-23.3-52-52-52l-117.4 0c4-17-.6-35.5-13.8-48.8c-20.3-20.3-53.2-20.3-73.5 0L32 342.5 32 128c0-35.3 28.7-64 64-64zm64 64l-64 0 0 64c35.3 0 64-28.7 64-64zM544 320c-35.3 0-64 28.7-64 64l64 0 0-64zM320 352a96 96 0 1 0 0-192 96 96 0 1 0 0 192z" />
              </svg>
            </div>
          </div>
        </div>

        <!-- Payment Actions -->
        <div class="grid grid-cols-12 gap-4 xxl:gap-6 p-4 box min-[1880px]:p-6 mb-4 xxl:mb-6">
          <div
            class="col-span-12 cursor-pointer border border-dashed qt-modal-btn duration-300 border-transparent hover:border-primary lg:col-span-6 xxxl:col-span-4 box bg-primary/5 dark:bg-bg3 flex items-center gap-4 4xl:gap-6 xl:p-3 min-[1880px]:p-6">
            <span
              class="bg-n0 dark:bg-bg4 w-10 h-10 xxl:w-16 xxl:h-16 flex items-center justify-center shrink-0 rounded-full shadow-[0px_6px_40px_0px_rgba(0,0,0,0.02)]"><i
                class="las text-2xl xxl:text-3xl la-exchange-alt"></i></span>
            <div>
              <h5 class="text-base xxl:text-lg 4xl:text-xl font-medium mb-1 xxl:mb-2">Make Home Transfer</h5>
              <span class="text-xs xxl:text-sm">Truist Mircofinance Bank</span>
            </div>
          </div>
          <a href="{% url 'localtransfer' %}"
            class="col-span-12 cursor-pointer border border-dashed  duration-300 border-transparent hover:border-primary lg:col-span-6 xxxl:col-span-4 box bg-primary/5 dark:bg-bg3 flex items-center gap-4 4xl:gap-6 xl:p-3 min-[1880px]:p-6">
            <span
              class="bg-n0 dark:bg-bg4 w-10 h-10 xxl:w-16 xxl:h-16 flex items-center justify-center shrink-0 rounded-full shadow-[0px_6px_40px_0px_rgba(0,0,0,0.02)]"><i
                class="las text-2xl xxl:text-3xl la-exchange-alt"></i></span>
            <div>
              <h5 class="text-base xxl:text-lg 4xl:text-xl font-medium mb-1 xxl:mb-2">Local Transfer</h5>
              <span class="text-xs xxl:text-sm">For Banks Within the USA</span>
            </div>
          </a>
          <a href="{% url 'intltransfer' %}"
            class="col-span-12 cursor-pointer border border-dashed  duration-300 border-transparent hover:border-primary lg:col-span-6 xxxl:col-span-4 box bg-primary/5 dark:bg-bg3 flex items-center gap-4 4xl:gap-6 xl:p-3 min-[1880px]:p-6">
            <span
              class="bg-n0 dark:bg-bg4 w-10 h-10 xxl:w-16 xxl:h-16 flex items-center justify-center shrink-0 rounded-full shadow-[0px_6px_40px_0px_rgba(0,0,0,0.02)]"><i
                class="las text-2xl xxl:text-3xl la-exchange-alt"></i></span>
            <div>
              <h5 class="text-base xxl:text-lg 4xl:text-xl font-medium mb-1 xxl:mb-2">Int'l Tranfer</h5>
              <span class="text-xs xxl:text-sm">For International Transfer</span>
            </div>
          </a>
        </div>
        <div class=" grid-cols-12   ">

        </div>
      </div>

      <!-- Right Side Bar -->

      <div class="col-span-12 md:col-span-5 lg:col-span-4">
        <div class="box">
          <h4 class="h4 bb-dashed mb-4 pb-4 lg:mb-6 lg:pb-6">Side Actions</h4>
          {% if credit_card %}
          {% for card in credit_card %}
          <a href="{% url 'card-detail' card.card_id %}">
            <div
              class="bg-secondary1 p-4 lg:px-6 lg:py-5 rounded-xl text-n0 relative overflow-hidden after:absolute after:rounded-full after:w-[300px] after:h-[300px] after:bg-[#FFC861] after:top-[45%] after:ltr:left-[65%] after:rtl:right-[65%] mb-6 lg:mb-8">
              <div class="flex justify-between items-start mb-3 sm:mb-4 lg:mb-8 xxxl:mb-14">
                <div>
                  <p class="text-xs mb-1">Current Balance</p>
                  <h4 class="h4">{{ card.amount|intcomma }} USD</h4>
                </div>
                <img src="{% static 'dashboard/images/visa-sm.png' %}" width="45" height="16" alt="visa icon" />
              </div>
              <img src="{% static 'dashboard/images/mastercard.png' %}" width="45" height="45" alt="visa icon" />
              <div class="flex justify-between items-end lg:mt-2">
                <div>
                  <p class="mb-1">{{ card.name }}</p>
                  <p class="text-xs">{{ card.number }}</p>
                </div>
                <p class="text-n700 relative z-[1]">{{ card.expiry|date:'m' }}/{{ card.expiry|date:'Y' }}</p>
              </div>
            </div>
          </a>
          {% endfor %}
          {% else %}

          <div class=" grid-cols-12  xxl:gap-6 add-card-btn">
            <div
              class="col-span-12 sm:col-span-6 lg:col-span-4 4xl:col-span-3 border border-dashed self-stretch max-xxxl:py-14 w-full rounded-2xl border-primary bg-primary/10 flex flex-col justify-center items-center text-center h-full">
              <button class="bg-primary text-n0 p-2 rounded-full mb-3 mt-3"> <i class="las la-plus"></i> </button>
              <p class="font-medium mb-2">Add New Credit Card</p>
              <button class="text-sm text-primary ">
                Add Now
              </button>
            </div>
          </div>
          {% endif %}

          {% comment %} <h5 class="mb-6 text-lg font-medium md:text-xl">Quick Transfer</h5>
          <form action="{% url 'search_user' %}" method="POST">
            {% csrf_token %}
            <div
              class="mb-5 flex items-center rounded-[32px] border border-n30 bg-primary/5 p-1 dark:border-n500 dark:bg-bg3">
              <input type="number" class="w-full border-none bg-transparent pr-5 focus:border-none focus:outline-none"
                placeholder="Account Number..." name="acc_number" maxlength="10" />
            </div>
            <button type="submit" class="btn flex w-full justify-center">Search</button>
          </form> {% endcomment %}
        </div>
      </div>

      <div class="col-span-12">
        <!-- TradingView Widget BEGIN -->
        <div class="tradingview-widget-container">
          <div class="tradingview-widget-container__widget"></div>
          <script type="text/javascript"
            src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js" async>
            {
              "symbols": [
                [
                  "Apple",
                  "AAPL|1D"
                ],
                [
                  "Google",
                  "GOOGL|1D"
                ],
                [
                  "Microsoft",
                  "MSFT|1D"
                ]
              ],
              "chartOnly": false,
              "width": "100%",
              "height": "500",
              "locale": "en",
              "colorTheme": "dark",
              "autosize": false,
              "showVolume": false,
              "showMA": false,
              "hideDateRanges": false,
              "hideMarketStatus": false,
              "hideSymbolLogo": false,
              "scalePosition": "right",
              "scaleMode": "Normal",
              "fontFamily": "-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",
              "fontSize": "10",
              "noTimeScale": false,
              "valuesTracking": "1",
              "changeMode": "price-and-percent",
              "chartType": "area",
              "maLineColor": "#2962FF",
              "maLineWidth": 1,
              "maLength": 9,
              "headerFontSize": "medium",
              "gridLineColor": "rgba(242, 54, 69, 0.63)",
              "lineWidth": 2,
              "lineType": 0,
              "dateRanges": [
                "1d|1",
                "1m|30",
                "3m|60",
                "12m|1D",
                "60m|1W",
                "all|1M"
              ]
            }
          </script>
        </div>
        <!-- TradingView Widget END -->
      </div>
      <!-- Latest Transactions -->
      <div class="col-span-12">
        <div class="box col-span-12 lg:col-span-6">
          <div class="bb-dashed mb-4 flex flex-wrap items-center justify-between gap-4 pb-4 lg:mb-6 lg:pb-6">
            <h4 class="h4">Latest Transaction</h4>
            <div class="flex items-center gap-4">
              <form
                class="bg-primary/5 dark:bg-bg3 border border-n30 dark:border-n500 flex gap-3 rounded-[30px] focus-within:border-primary p-1 items-center justify-between min-w-[200px] xxl:max-w-[319px] w-full">
                <input type="text" placeholder="Search"
                  class="bg-transparent border-none text-sm ltr:pl-4 rtl:pr-4 py-1 w-full" />
                <button
                  class="bg-primary shrink-0 rounded-full w-7 h-7 lg:w-8 lg:h-8 flex justify-center items-center text-n0"><i
                    class="las la-search text-lg"></i></button>
              </form>
              <div class="flex items-center gap-3 whitespace-nowrap">
                <span>Sort By :</span>
                <select class="nc-select green !rounded-3xl">
                  <option value="day">Last 15 Days</option>
                  <option value="week">Last 1 Month</option>
                  <option value="year">Last 6 Month</option>
                </select>
              </div>
            </div>
          </div>
          <div class="overflow-x-auto">
            <table class="w-full whitespace-nowrap " id="transactionTable">
              <thead>
                <tr class="bg-secondary1/5 dark:bg-bg3">
                  {% comment %} <th class="w-[50px] px-6 text-start">
                    <input name="select-all" type="checkbox" id="selectAllCheckbox"
                      class="accent-secondary1 focus:border-none focus:shadow-none focus:outline-none" />
                  </th> {% endcomment %}
                  <th class="min-w-[330px] cursor-pointer px-6 py-5 text-start">
                    <div class="flex items-center gap-1">Account</div>
                  </th>
                  <th class="min-w-[120px] py-5 text-start">Date/Time</th>
                  <th class="min-w-[120px] cursor-pointer py-5 text-start">
                    <div class="flex items-center gap-1">Amount</div>
                  </th>
                  <th class="min-w-[120px] cursor-pointer py-5 text-start">
                    <div class="flex items-center gap-1">Transaction Fee</div>
                  </th>
                  <th class="cursor-pointer py-5 text-start">
                    <div class="flex items-center gap-1">Status</div>
                  </th>
                  <th class="cursor-pointer py-5 text-start">
                    <div class="flex items-center gap-1">Action</div>
                  </th>
                </tr>
              </thead>
              <tbody>
                {% if not transactions %}
                <h3>No Transaction History Yet</h3>
                {% else %}
                {% for transaction in transactions %}
                <tr class="even:bg-secondary1/5 dark:even:bg-bg3 ">
                  {% comment %} <td class="px-6 text-start">
                    <input type="checkbox" class="accent-secondary1" name="checkbox1" />
                  </td> {% endcomment %}
                  {% if transaction.transaction_type == 'Debit' %}
                  <a href="{% url 'transaction_detail' transaction.id %}">
                    <td class="px-6 py-2">
                      <p class="mb-1 font-medium">{{ transaction.receiver_name }} -{{ transaction.receiver }}</p>
                      <span class="text-xs">{{ transaction.ref_code }}</span>
          </div>
        </div>
        </td>
        </a>
        {% else %}
        <td class="px-6 py-2">
          <p class="mb-1 font-medium">{{ transaction.sender }}</p>
          <span class="text-xs">{{ transaction.ref_code }}</span>
      </div>
    </div>
    </td>
    {% endif %}

    <td class="py-2">
      <div>
        <p class="mb-1 font-medium">{{ transaction.transaction_time|date:'Y-m-d' }}</p>
        <span class="text-xs">{{ transaction.transaction_time|time:'H:i:s' }}</span>
      </div>
    </td>
    <td class="py-2">
      <div>
        <p class="mb-1 font-medium">{{user.currency}}{{ transaction.amount|intcomma }}</p>
        {% if transaction.transaction_type == 'Debit' %}
        <span class="text-xs text-secondary2">Debit</span>
        {% else %}
        <span class="text-xs text-primary">Credit</span>
        {% endif %}
      </div>
    </td>
    {% if transaction.fee == 'Free' %}
    <td class="py-2">{{ transaction.fee }}</td>
    {% else %}
    <td class="py-2">{{user.currency}}{{ transaction.fee|intcomma }}</td>
    {% endif %}

    <td class="py-2">
      {% if transaction.status == 'Success' %}
      <span
        class="block text-xs w-28 xxl:w-36 text-center rounded-[30px] dark:border-n500 border border-n30 py-2 bg-primary/10 dark:bg-bg3 text-primary">{{ transaction.status }}</span>
      {% elif transaction.status == 'Pending' %}
      <span
        class="block w-28 rounded-[30px] border border-n30 bg-secondary3/10 py-2 text-center text-xs text-secondary3 dark:border-n500 dark:bg-bg3 xxl:w-36">{{ transaction.status }}</span>
      {% else %}
      <span
        class="block w-28 rounded-[30px] border border-n30 bg-secondary2/10 py-2 text-center text-xs text-secondary2 dark:border-n500 dark:bg-bg3 xxl:w-36">{{ transaction.status }}</span>
      {% endif %}
    </td>
    <td class="py-2">
      <div class="flex justify-center">
        <div class="relative">
          <i class="las la-ellipsis-v horiz-option-btn cursor-pointer"></i>
          <ul
            class="horiz-option hide  top-full z-[3] min-w-[122px] rounded-md bg-n0 p-3 shadow-[0px_6px_30px_0px_rgba(0,0,0,0.08)] duration-300 dark:bg-bg3 ltr:right-0 ltr:origin-top-right rtl:left-0 rtl:origin-top-left">
            <li>
              <a href="{% url 'transaction_detail' transaction.id %}"
                class="block w-full text-start cursor-pointer rounded px-3 py-1 text-sm leading-normal duration-300 hover:bg-primary/10 dark:hover:bg-bg4">
                See Details
              </a>
            </li>
          </ul>
        </div>
      </div>
    </td>
    </tr>

    {% endfor %}
    {% endif %}
    </tbody>
    </table>
  </div>
  <div class="flex col-span-12 gap-4 sm:justify-between justify-center items-center flex-wrap">
    <p>
      Showing {{ transactions.start_index }} to {{ transactions.end_index }} of {{ transactions.paginator.count }}
      entries
    </p>

    <ul class="flex gap-2 md:gap-3 flex-wrap md:font-semibold items-center">
      {% if transactions.has_previous %}
      <li>
        <a href="?page=1"
          class="hover:bg-primary text-primary rtl:rotate-180 hover:text-n0 border md:w-10 duration-300 md:h-10 w-8 h-8 flex items-center rounded-full justify-center border-primary">
          <i class="las la-angle-left text-lg"></i>
        </a>
      </li>
      <li>
        <a href="?page={{ transactions.previous_page_number }}"
          class="hover:bg-primary text-n0 bg-primary hover:text-n0 border md:w-10 duration-300 md:h-10 w-8 h-8 flex items-center rounded-full justify-center border-primary">
          {{ transactions.previous_page_number }}
        </a>
      </li>
      {% endif %}
      <li>
        <span
          class="hover:bg-primary text-primary hover:text-n0 border md:w-10 duration-300 md:h-10 w-8 h-8 flex items-center rounded-full justify-center border-primary">
          {{ transactions.number }}
        </span>
      </li>
      {% if transactions.has_next %}
      <li>
        <a href="?page={{ transactions.next_page_number }}"
          class="hover:bg-primary text-primary hover:text-n0 border md:w-10 duration-300 md:h-10 w-8 h-8 flex items-center rounded-full justify-center border-primary">
          {{ transactions.next_page_number }}
        </a>
      </li>
      <li>
        <a href="?page={{ transactions.paginator.num_pages }}"
          class="hover:bg-primary text-primary hover:text-n0 rtl:rotate-180 border md:w-10 duration-300 md:h-10 w-8 h-8 flex items-center rounded-full justify-center border-primary">
          <i class="las la-angle-right text-lg"></i>
        </a>
      </li>
      {% endif %}
    </ul>
  </div>
</main>




<!-- open Account modal -->
<div class="ac-modal-overlay fixed inset-0 z-[99] modalhide overflow-y-auto bg-n900/80 duration-500">
  <div class="overflow-y-auto">
    <div
      class="modal box modal-inner absolute left-1/2 my-10 max-h-[90vh] w-[95%] max-w-[710px] duration-300 -translate-x-1/2 overflow-y-auto xl:p-8">
      <!-- { "translate-y-0 scale-100 opacity-100 my-10": open } -->
      <div class="relative">
        <button class="ac-modal-close-btn absolute top-0 ltr:right-0 rtl:left-0"><i class="las la-times"></i></button>
        <div class="bb-dashed mb-4 flex items-center justify-between pb-4 lg:mb-6 lg:pb-6">
          <h4 class="h4">Create Bank Account</h4>
        </div>
        <form>
          <p class="mb-4 text-lg font-medium">Profile Photo</p>
          <div class="mb-6 flex flex-wrap items-center gap-5 xl:gap-10">
            <img src="{% static 'dashboard/images/placeholder.png' %}" class="h-20 w-20 lg:h-auto lg:w-auto"
              alt="placeholder" />
            <div class="flex gap-4">
              <input type="file" name="photo" id="photo" class="hidden" />
              <label for="photo" class="btn">Upload Photo</label>
              <button class="btn-outline">Cancel</button>
            </div>
          </div>
          <div class="mt-6 grid grid-cols-2 gap-4 xl:mt-8 xxxl:gap-6">
            <div class="col-span-2">
              <label for="name" class="mb-4 block font-medium md:text-lg">Account Holder Name</label>
              <input type="text"
                class="w-full rounded-3xl border border-n30 bg-secondary1/5 px-6 py-2.5 dark:border-n500 dark:bg-bg3 md:py-3"
                placeholder="Enter Name" id="name" required />
            </div>
            <div class="col-span-2">
              <label for="number" class="mb-4 block font-medium md:text-lg">Phone Number</label>
              <input type="number"
                class="w-full rounded-3xl border border-n30 bg-secondary1/5 px-6 py-2.5 dark:border-n500 dark:bg-bg3 md:py-3"
                placeholder="Enter Number" id="number" required />
            </div>
            <div class="col-span-2">
              <label for="currency" class="mb-4 block font-medium md:text-lg">Select Currency</label>
              <select name="currency" class="nc-select full dark:!border-n500">
                <option value="usd">USD</option>
                <option value="gbp">GBP</option>
                <option value="yen">YEN</option>
                <option value="jpn">JPN</option>
              </select>
            </div>
            <div class="col-span-2 md:col-span-1">
              <label for="rate" class="mb-4 block font-medium md:text-lg">Interest Rate</label>
              <input type="number"
                class="w-full rounded-3xl border border-n30 bg-secondary1/5 px-6 py-2.5 dark:border-n500 dark:bg-bg3 md:py-3"
                placeholder="Interest Rate %" id="rate" required />
            </div>
            <div class="col-span-2 md:col-span-1">
              <label for="expire" class="mb-4 block font-medium md:text-lg">Expiry Date</label>
              <div class="relative bg-secondary1/5 py-3 dark:bg-bg3 border border-n30 dark:border-n500 rounded-3xl">
                <input id="date" class="border-none" placeholder="Select Date" autocomplete="off" />
                <i class="las la-calendar absolute ltr:right-4 rtl:left-4 top-1/2 -translate-y-1/2 cursor-pointer"></i>
              </div>
            </div>
            <div class="col-span-2">
              <label for="amount" class="mb-4 block font-medium md:text-lg">Amount</label>
              <input type="number"
                class="w-full rounded-3xl border border-n30 bg-secondary1/5 px-6 py-2.5 dark:border-n500 dark:bg-bg3 md:py-3"
                placeholder="Enter Amount" id="amount" required />
            </div>
            <div class="col-span-2">
              <label for="status" class="mb-4 block font-medium md:text-lg">Select Status</label>
              <select name="currency" class="nc-select full dark:!border-n500">
                <option value="active">Active</option>
                <option value="inactive">Inactive</option>
              </select>
            </div>
            <div class="col-span-2 mt-4">
              <button class="btn flex w-full justify-center" type="submit">Create Account</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Make Payment modal -->
<div class="qt-modal fixed inset-0 z-[99] modalhide overflow-y-auto bg-n900/80 duration-500">
  <div class="overflow-y-auto">
    <div
      class="modal box modal-inner absolute left-1/2 -translate-y-1/2 top-1/2 max-h-[90vh] w-[95%] max-w-[496px] -translate-x-1/2 overflow-y-auto duration-300 xl:p-8">
      <div class="relative">
        <button class="qt-modal-close-btn absolute top-0 ltr:right-0 rtl:left-0"><i class="las la-times"></i></button>
        <div class="bb-dashed mb-4 flex items-center justify-between pb-4 lg:mb-6 lg:pb-6">
          <h4 class="h4">Quick Transfer</h4>
        </div>
        <form action="{% url 'search_user' %}" method="POST" class="flex-fill">
          {% csrf_token %}
          <div class="bb-dashed pb-4 mb-4 lg:mb-6 lg:pb-6 flex flex-col">
            <div class="box border border-n30 dark:border-n500 bg-primary/5 dark:bg-bg3 xl:p-3 xxl:p-4 spend order-1">
              <div class="flex justify-between gap-3 bb-dashed items-center text-sm mb-4 pb-4">
                <p>Enter account number to search</p>
              </div>
              <div class="flex justify-between items-center font-medium">
                <input type="number" class="bg-transparent" name="acc_number" placeholder="ex: 1234567890"
                  maxlength="10" />
              </div>
            </div>
          </div>
          <div>
            <button class="btn flex justify-center w-full" type="submit">Search Now</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Make Payment modal -->
<div class="qt-modal fixed inset-0 z-[99] modalhide overflow-y-auto bg-n900/80 duration-500">
  <div class="overflow-y-auto">
    <div
      class="modal box modal-inner absolute left-1/2 -translate-y-1/2 top-1/2 max-h-[90vh] w-[95%] max-w-[496px] -translate-x-1/2 overflow-y-auto duration-300 xl:p-8">
      <div class="relative">
        <button class="qt-modal-close-btn absolute top-0 ltr:right-0 rtl:left-0"><i class="las la-times"></i></button>
        <div class="bb-dashed mb-4 flex items-center justify-between pb-4 lg:mb-6 lg:pb-6">
          <h4 class="h4">Quick Transfer</h4>
        </div>

        <div class="bb-dashed pb-4 mb-4 lg:mb-6 lg:pb-6 flex flex-col">
          <div class="box border border-n30 dark:border-n500 bg-primary/5 dark:bg-bg3 xl:p-3 xxl:p-4 spend order-1">
            <div class="flex justify-between gap-3 bb-dashed items-center text-sm mb-4 pb-4">
              <p>Spend</p>
              <p>Balance : 10,000 USD</p>
            </div>
            <div class="flex justify-between items-center text-xl gap-4 font-medium">
              <input type="number" class="w-20 bg-transparent p-0 border-none" placeholder="0.00" />
              <p class="shrink-0">{{user.currency}} USD</p>
            </div>
          </div>
          <button
            class="p-2 border order-2 border-n30 dark:border-n500 self-center -my-4 relative z-[2] rounded-lg bg-n0 dark:bg-bg4 text-primary changeOrderBtn"><i
              class="las la-exchange-alt rotate-90"></i></button>
          <div class="box border border-n30 dark:border-n500 bg-primary/5 dark:bg-bg3 xl:p-3 xxl:p-4 receive order-3">
            <div class="flex justify-between gap-3 bb-dashed items-center text-sm mb-4 pb-4">
              <p>Receive</p>
              <p>Balance : 10,000 USD</p>
            </div>
            <div class="flex justify-between items-center text-xl gap-4 font-medium">
              <input type="number" class="w-20 bg-transparent p-0 border-none" placeholder="0.00" />
              <p class="shrink-0">€ EURO</p>
            </div>
          </div>
        </div>
        <div>
          <p class="text-lg font-medium mb-6">Payment Method</p>
          <div
            class="border border-primary border-dashed bg-primary/5 rounded-lg p-3 flex items-center gap-4 mb-6 lg:mb-8">
            <img src="{% static 'dashboard/images/card-sm-1.png' %}" width="60" height="40" alt="card" />
            <div>
              <p class="font-medium mb-1">John Snow - Metal</p>
              <span class="text-xs">**4291 - Exp: 12/26</span>
            </div>
          </div>
          <a href="#" class="btn flex justify-center w-full">Send Now</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Add New card modal -->
<div class="add-card-modal fixed inset-0 z-[99] modalhide overflow-y-auto bg-n900/80 duration-500">
  <div class="overflow-y-auto">
    <div
      class="modal box modal-inner absolute left-1/2 -translate-y-1/2 top-1/2 max-h-[90vh] w-[95%] max-w-[496px] -translate-x-1/2 overflow-y-auto duration-300 xl:p-8">
      <!-- { "translate-y-0 scale-100 opacity-100 my-10": open } -->
      <div class="relative">
        <button class="add-card-modal-close-btn absolute top-0 ltr:right-0 rtl:left-0">
          <i class="las la-times"></i>
        </button>
        <div class="bb-dashed mb-4 flex items-center justify-between pb-4 lg:mb-6 lg:pb-6">
          <h4 class="h4">Create Bank Account</h4>
        </div>
        <form action="{% url 'dashboard' %}" method="POST">
          {% csrf_token %}
          <div class="mt-6 xl:mt-8 grid grid-cols-2 gap-4 xxxl:gap-6">
            <div class="col-span-2">
              <label for="card-number" class="md:text-lg font-medium block mb-4">
                Card Type
              </label>
              <div class="bg-secondary1/5 dark:bg-bg3 border border-n30 dark:border-n500 rounded-3xl relative">
                {{ form.card_type }}
              </div>
            </div>

            <div class="col-span-2 mt-4">
              <button class="btn flex w-full justify-center" type="submit">
                Add Card
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<script>
  // Function to generate the greeting
  function getGreeting(name) {
      const now = new Date();
      const hour = now.getHours();
      let greeting;

      if (hour < 12) {
          greeting = "Good morning";
      } else if (hour < 18) {
          greeting = "Good afternoon";
      } else {
          greeting = "Good evening";
      }

      return `${greeting}, ${name}!`;
  }

  // Get the name from a Django tag
  const userName = "{{ user.first_name|default:'User' }}"; // Replace 'user.first_name' with your variable
  const greetingMessage = getGreeting(userName);

  // Display the greeting
  document.getElementById("greeting").textContent = greetingMessage;
</script>
{% endblock %}